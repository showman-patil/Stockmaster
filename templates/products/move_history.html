<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Movement History | StockMaster</title>

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <style>
        /* Page fade animation */
        body {
            animation: fadeIn .6s ease-out;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Glass card */
        .glass-card {
            background: rgba(255, 255, 255, .85);
            backdrop-filter: blur(14px);
            border-radius: 16px;
            border: 1px solid rgba(99, 102, 241, 0.28);
            box-shadow: 0 8px 22px rgba(99, 102, 241, 0.22);
            transition: .25s ease;
        }

        .glass-card:hover {
            box-shadow: 0 14px 36px rgba(99, 102, 241, .35);
        }

        /* Table row hover */
        .row-hover {
            transition: .25s ease;
        }

        .row-hover:hover {
            background: rgba(229, 231, 255, 0.55);
            transform: scale(1.01);
            box-shadow: 0 3px 10px rgba(99, 102, 241, .25);
        }

        /* Header */
        .table-head {
            background: linear-gradient(90deg, #4338ca, #4f46e5);
            color: white;
        }

        .btn-back {
            background: #1f2937;
            padding: 10px 20px;
            color: white;
            border-radius: 10px;
            transition: .25s ease;
        }

        .btn-back:hover {
            background: black;
            transform: translateY(-2px);
        }
    </style>

</head>

<body class="bg-gradient-to-br from-indigo-300 via-gray-100 to-blue-200 min-h-screen p-10">


    <!-- TOP BAR -->
    <div class="flex justify-between items-center mb-10">
        <div class="flex items-center">
            {% if request.user.is_authenticated %}
            <a href="{% url 'dashboard' %}" class="btn-back mr-4">‚Üê Dashboard</a>
            {% else %}
            <a href="{% url 'login' %}?next={% url 'dashboard' %}" class="btn-back mr-4">‚Üê Dashboard</a>
            {% endif %}
            <h1 class="text-4xl font-extrabold text-gray-900 tracking-wide">
                üìú Stock Movement History
            </h1>
        </div>

        <a href="{% url 'products:product_list' %}" class="btn-back shadow">
            ‚Üê Back to Products
        </a>
    </div>


    <!-- CARD -->
    <div class="max-w-6xl mx-auto glass-card p-8 overflow-x-auto">

        <table class="w-full text-center text-gray-800">

            <thead class="text-lg table-head rounded-md">
                <tr>
                    <th class="py-4">#</th>
                    <th>Product</th>
                    <th>Type</th>
                    <th>Quantity</th>
                    <th>Previous</th>
                    <th>New</th>
                    <th>Date</th>
                    <th>Note</th>
                </tr>
            </thead>

            <tbody>
                {% for m in history %}
                <tr class="row-hover bg-white/60 rounded-xl">

                    <td class="font-semibold text-indigo-700">H-{{ m.id }}</td>
                    <td>{{ m.product.name }}</td>
                    <td>{{ m.movement_type }}</td>
                    <td class="font-bold text-indigo-600">{{ m.quantity }}</td>
                    <td>{{ m.previous_stock }}</td>
                    <td class="font-bold">{{ m.new_stock }}</td>
                    <td>{{ m.date }}</td>
                    <td>{{ m.note|default:"‚Äî" }}</td>

                </tr>
                {% endfor %}

                {% if history|length == 0 %}
                <tr>
                    <td colspan="8" class="p-6 text-gray-500">
                        No movement history found.
                    </td>
                </tr>
                {% endif %}
            </tbody>

        </table>

    </div>

</body>

</html>
